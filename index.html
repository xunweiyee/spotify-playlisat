<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Spotify Playlist from Text</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
  </head>
  <body>

    <!-- title -->
    <section class="section">
      <div class="container">
        <h1 class="title">
          Spotify Playlist from Text
        </h1>
        <p class="subtitle">
          Spotify playlist generator with regex.
        </p>
      </div>
    </section>

    <section>
      <div class="container">
        <div class="columns is-vcentered">
          <div class="column is-half">

            <!-- input text area -->
            <textarea id="txtinput" onpaste="toOutput()" class="textarea" placeholder="e.g. Set Fire to the Rain - Adele" rows="15"></textarea>

            <!-- split input -->
            <div class="columns mt-2">
              <div class="column is-one-fifth">
                <p class="">Split input</p>
              </div>
              <!-- radio -->
              <div class="column is-one-third">
                <div class="control">
                  <label class="radio">
                    <input id="space" type="radio" name="foobar" checked>
                    Space
                  </label>
                  <label class="radio">
                    <input id="tab" type="radio" name="foobar">
                    Tab
                  </label>
                </div>
              </div>
              <!-- checkbox -->
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="0">1</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="1">2</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="2">3</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="3">4</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="4">5</label>
              </div>
            </div>

            <!-- replace text -->
            <div class="field has-addons">
              <div class="control is-expanded">
                <input id="replaceTerm" class="input" type="text" placeholder="e.g. Artist">
              </div>
              <div class="control">
                <button onclick="replaceText()" class="button is-info">
                  Replace
                </button>
              </div>
            </div>

            <!-- buttons -->
            <div id="regexbtn" class="buttons is-right">
              <button class="button" onclick="removeLine()">empty lines</button>
              <button class="button" onclick="removeNumber()">numbers</button>
              <button class="button" onclick="removeSymbol()">symbols</button>
              <button class="button" onclick="processText()">all</button>
            </div>

            <!-- split output -->
            <div class="columns mt-2">
              <div class="column is-one-fifth">
                <p class="">Split output</p>
              </div>
              <!-- radio -->
              <div class="column is-one-third">
                <div class="control">
                  <label class="radio">
                    <input id="spaceo" type="radio" name="group2" checked>
                    Space
                  </label>
                  <label class="radio">
                    <input id="tabo" type="radio" name="group2">
                    Tab
                  </label>
                </div>
              </div>
              <!-- checkbox -->
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="0">1</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="1">2</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="2">3</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="3">4</label>
              </div>
              <div class="column">
                <label class="checkbox"><input type="checkbox" value="4">5</label>
              </div>
            </div>            

            <!-- paste and clear -->
            <div id="regexbtn" class="buttons is-right">
              <button class="button" onclick="toOutput()">Paste</button>
              <button class="button is-danger is-left" onclick="clearText()">Clear</button>
            </div>

          </div>

          <div class="column is-half">
            <!-- output text area -->
            <div class="control">
              <textarea id="output" class="textarea" readonly rows=22>test</textarea>
            </div>

            <!-- spotify -->
            <div class="buttons is-right mt-4">
              <button class="button is-success">Generate Spotify Playlist</button>
            </div>

          </div>
        </div>
      </div>
    </section>

  </body>
</html>



<script>

  function toOutput() {
    var txt = document.getElementById("txtinput").value;
    document.getElementById("output").value = txt;
  }

  function clearText() {
    document.getElementById("output").value = "";
  }

  function replaceText() {
    var term = document.getElementById("replaceTerm").value;
    var txt = document.getElementById("output").value;
    txt = txt.replaceAll(term, "");
    document.getElementById("output").value = txt;
  }

  function removeLine() {
    var txt = document.getElementById("output").value;
    txt = txt.replace(/^\s*[\r\n]/g, '');
    // txt = txt.replace(/\t+/g, ' ');
    txt = txt.replace(/  +/g, ' ');
    document.getElementById("output").value = txt;
  }

  function removeNumber() {
    var txt = document.getElementById("output").value;
    txt = txt.replace(/\d+/g,'');
    document.getElementById("output").value = txt;
  }

  function removeSymbol() {
    var txt = document.getElementById("output").value;
    txt = txt.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, ' ')
    document.getElementById("output").value = txt;
  }

  // function regexMatch() {
  //   removeLine();

  //   var lines = document.getElementById("output").value.split('\n');
  //     for(var i = 0;i < lines.length;i++){
  //       lines[i].match(/)
  //     }
  // }

  var checkboxes = document.querySelectorAll("input[type=checkbox]");

  for (var i=0, len=checkboxes.length; i<len; i++) {
    if ( checkboxes[i].type === 'checkbox') {
        checkboxes[i].onclick = function() {
          // if(this.checked) {
          //   alert(this.value);
          // }
          var checkboxesChecked = [];
          // loop over them all
          for (var i=0; i<checkboxes.length; i++) {
             // And stick the checked ones onto an array...
             if (checkboxes[i].checked) {
                checkboxesChecked.push(checkboxes[i].value);
             }
          }
          // alert(checkboxesChecked);
          splitLine(checkboxesChecked);

        }
    }
  }

  function splitLine(checkboxesChecked) {

    var separator = " "
    if (document.getElementById('tab').checked) {
      separator = "\t"
    }
    // alert(separator)

    var txt = document.getElementById("txtinput").value;
    lines = txt.match(/[^\r\n]+/g);
    // alert(lines);
    var output = "";
    for (var i=0; i<lines.length; i++) {
      line = lines[i].split(separator);
      var temp = "";
      for (var j=0; j<checkboxesChecked.length; j++) {
        temp = temp + " " + line[checkboxesChecked[j]]
      }
      output = output + temp + "\n";
    }
    // alert(output);

    document.getElementById("output").value = output;
    // body...
  }
  




  function spotifySearch(title) {
    // body...
  }









</script>

<!-- https://developer.spotify.com/documentation/general/guides/authorization-guide/ -->